<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–í—Ä–∞—â–∞—é—â–∏–π—Å—è –†–∞—Å—Å–∫–∞–∑</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        /* CSS –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–∏ –≤—Ä–∞—â–µ–Ω–∏—è */
        .letter {
            /* –°–¥–µ–ª–∞—Ç—å –±—É–∫–≤—ã inline-block –¥–ª—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –≤—Ä–∞—â–µ–Ω–∏—è */
            display: inline-block; 
            font-size: 2.5rem; /* –†–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞ */
            font-weight: bold;
            padding: 5px;
            /* –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—é –Ω–∞ 3D –¥–ª—è –ø–ª–∞–≤–Ω–æ–≥–æ –≤—Ä–∞—â–µ–Ω–∏—è */
            transform-style: preserve-3d; 
            /* –ó–∞–ø—É—Å–∫ –∞–Ω–∏–º–∞—Ü–∏–∏: –∏–º—è, –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, —Ñ—É–Ω–∫—Ü–∏—è, –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ—Å—Ç—å */
            animation: spin var(--duration) var(--direction) infinite linear;
        }

        .word {
            display: inline-block;
            white-space: nowrap; /* Prevent word from breaking internally */
            margin-right: 10px; /* Space between words */
        }

        /* –ö–ª—é—á–µ–≤—ã–µ –∫–∞–¥—Ä—ã –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–∏ –≤—Ä–∞—â–µ–Ω–∏—è */
        @keyframes spin {
            /* –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è --axis –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –≤–æ–∫—Ä—É–≥ –∫–∞–∫–æ–π –æ—Å–∏ –≤—Ä–∞—â–∞—Ç—å */
            from { transform: rotate3d(var(--axis), 0deg); }
            to { transform: rotate3d(var(--axis), 360deg); }
        }

        /* –¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ */
        #story-container {
            min-height: 400px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-wrap: wrap;
            text-align: center;
        }
    </style>
</head>
<body class="">

    <div class="container py-5">
        <h1 class="text-center mb-4">üåÄ –í—Ä–∞—â–∞—é—â–∏–π—Å—è –†–∞—Å—Å–∫–∞–∑ üåÄ</h1>
        
        <div class="text-center mb-3">
            <button id="fullscreen-btn" class="btn btn-primary">Full Screen</button>
        </div>

        <div id="story-container">
            </div>

        <p class="text-center mt-3 text-muted">–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø—Ä–æ—á–∏—Ç–∞—Ç—å —Ä–∞—Å—Å–∫–∞–∑!</p>
    </div>

    <script>
        const defaultConfig = {
            storyText: "–í–µ—á–µ—Ä –±—ã–ª —Ç–∏—Ö–∏–º. –°–æ–ª–Ω—Ü–µ –º–µ–¥–ª–µ–Ω–Ω–æ —Å–∞–¥–∏–ª–æ—Å—å –∑–∞ –≥–æ—Ä–∏–∑–æ–Ω—Ç. –ù–∞ –Ω–µ–±–µ –ø–æ—è–≤–∏–ª–∏—Å—å –ø–µ—Ä–≤—ã–µ –∑–≤—ë–∑–¥—ã. –õ—ë–≥–∫–∏–π –≤–µ—Ç–µ—Ä–æ–∫ —à–µ–ª–µ—Å—Ç–µ–ª –ª–∏—Å—Ç–≤–æ–π –¥–µ—Ä–µ–≤—å–µ–≤. –ù–∞—Å—Ç—É–ø–∏–ª–∞ –ø—Ä–æ—Ö–ª–∞–¥–∞.",
            containerId: 'story-container',
            animation: {
                minDuration: 1, // seconds
                maxDuration: 5, // seconds
                // Directions of rotation (vector X, Y, Z)
                axes: [
                    [1, 0, 0], // Around X
                    [0, 1, 0], // Around Y
                    [0, 0, 1], // Around Z
                    [1, 1, 0], // Around X and Y
                    [0, 1, 1], // Around Y and Z
                    [1, 1, 1]  // Around all axes
                ]
            },
            style: {
                fontSize: '2.5rem',
                color: '#333333',
                backgroundColor: '#f0f8ff',
                backgroundImage: ''
            }
        };

        // Update config from URL params
        const params = new URLSearchParams(window.location.search);
        const config = { ...defaultConfig };
        config.storyText = params.get('text') || defaultConfig.storyText;
        config.animation.minDuration = parseFloat(params.get('min')) || defaultConfig.animation.minDuration;
        config.animation.maxDuration = parseFloat(params.get('max')) || defaultConfig.animation.maxDuration;
        config.style.fontSize = params.get('size') ? `${params.get('size')}rem` : defaultConfig.style.fontSize;
        config.style.color = params.get('color') ? `#${params.get('color')}` : defaultConfig.style.color;
        config.style.backgroundColor = params.get('bgcolor') ? `#${params.get('bgcolor')}` : defaultConfig.style.backgroundColor;
        config.style.backgroundImage = params.get('bg') ? `url(${params.get('bg')})` : defaultConfig.style.backgroundImage;

        if (params.get('rotation') === '2d') {
            config.animation.axes = [[0, 0, 1]];
        }

        const container = document.getElementById(config.containerId);
        // Apply styles
        document.body.style.setProperty('background-color', config.style.backgroundColor, 'important');
        if (config.style.backgroundImage) {
            document.body.style.setProperty('background-image', config.style.backgroundImage, 'important');
            document.body.style.setProperty('background-size', 'cover', 'important');
            document.body.style.setProperty('background-position', 'center', 'important');
        }

        const words = config.storyText.split(' ');

        words.forEach(word => {
            const wordSpan = document.createElement('span');
            wordSpan.classList.add('word');

            word.split('').forEach(char => {
                const letterSpan = document.createElement('span');
                letterSpan.textContent = char;
                letterSpan.classList.add('letter');
                letterSpan.style.fontSize = config.style.fontSize;
                letterSpan.style.color = config.style.color;

                const durationRange = config.animation.maxDuration - config.animation.minDuration;
                const speed = (Math.random() * durationRange + config.animation.minDuration).toFixed(2);
                letterSpan.style.setProperty('--duration', `${speed}s`);

                const direction = Math.random() > 0.5 ? 'normal' : 'reverse';
                letterSpan.style.setProperty('--direction', direction);

                const randomAxis = config.animation.axes[Math.floor(Math.random() * config.animation.axes.length)];
                letterSpan.style.setProperty('--axis', randomAxis.join(', '));
                
                wordSpan.appendChild(letterSpan);
            });

            container.appendChild(wordSpan);
        });
    </script>

    <script>
        const fullscreenBtn = document.getElementById('fullscreen-btn');
        fullscreenBtn.addEventListener('click', () => {
            if (!document.fullscreenElement) {
                document.documentElement.requestFullscreen();
            } else {
                if (document.exitFullscreen) {
                    document.exitFullscreen();
                }
            }
        });

        document.addEventListener('fullscreenchange', () => {
            if (!document.fullscreenElement) {
                fullscreenBtn.textContent = 'Full Screen';
            } else {
                fullscreenBtn.textContent = 'Exit Full Screen';
            }
        });
    </script>
    
</body>
</html>