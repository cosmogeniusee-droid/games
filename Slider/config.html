<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –°—Å—ã–ª–∫–∏ –¥–ª—è –ò–≥—Ä—ã</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background-color: #f0f8ff;
            color: #333;
        }

        h1 {
            color: #1e90ff;
        }

        label {
            display: block;
            margin-top: 15px;
            margin-bottom: 5px;
            font-weight: bold;
        }

        #textInput {
            width: 100%;
            height: 100px;
            padding: 10px;
            box-sizing: border-box;
            border: 2px solid #ccc;
            border-radius: 5px;
            font-size: 1em;
            resize: vertical;
            /* –†–∞–∑—Ä–µ—à–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ —Ç–æ–ª—å–∫–æ –ø–æ –≤–µ—Ä—Ç–∏–∫–∞–ª–∏ */
        }

        .output-box {
            margin-top: 20px;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
            background-color: #fff;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }

        #urlDisplay {
            word-break: break-all;
            /* –û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –ø–µ—Ä–µ–Ω–æ—Å –¥–ª–∏–Ω–Ω–æ–≥–æ URL */
            color: #555;
            font-family: monospace;
            background-color: #f7f7f7;
            padding: 5px;
            border-radius: 3px;
        }

        #copyLink {
            display: inline-block;
            margin-top: 10px;
            padding: 10px 15px;
            background-color: #32cd32;
            /* –Ø—Ä–∫–æ-–∑–µ–ª–µ–Ω—ã–π */
            color: white;
            text-decoration: none;
            border-radius: 5px;
            font-weight: bold;
            transition: background-color 0.3s;
            font-size: 1em;
            border: none;
        }

        #copyLink:hover {
            background-color: #228b22;
        }

        #gameLink {
            display: inline-block;
            margin-top: 10px;
            padding: 10px 15px;
            background-color: #32cd32;
            /* –Ø—Ä–∫–æ-–∑–µ–ª–µ–Ω—ã–π */
            color: white;
            text-decoration: none;
            border-radius: 5px;
            font-weight: bold;
            transition: background-color 0.3s;
        }

        #gameLink:hover {
            background-color: #228b22;
        }
    </style>
</head>

<body>

    <h1>üìù –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Å—Å—ã–ª–∫–∏ –¥–ª—è –∏–≥—Ä—ã</h1>

    <label for="textInput">–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç (—Å–ª–æ–≤–∞ –ø–æ —Å–ª–æ–≥–∞–º –∏–ª–∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è):</label>
    <textarea id="textInput" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ú–ê-–®–ò-–ù–ê&#10;–ò–ª–∏: –ö–û-–†–û–¢-–ö–ò–ô|–°–õ–û–ì"></textarea>

    <div class="output-box">
        <label>–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Å—ã–ª–∫–∞:</label>
        <div id="urlDisplay">index.html?text=</div>

        <a id="gameLink" href="index.html?text=" target="_blank">üöÄ –û—Ç–∫—Ä—ã—Ç—å –∏–≥—Ä—É —Å —ç—Ç–∏–º —Ç–µ–∫—Å—Ç–æ–º</a>
        <button type="button" id="copyLink">–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É</button>
    </div>

    <script>
        const textInput = document.getElementById('textInput');
        const urlDisplay = document.getElementById('urlDisplay');
        const gameLink = document.getElementById('gameLink');
        const copyLink = document.getElementById('copyLink');

        function updateLink() {
            // 1. –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—Å—Ç –∏–∑ –ø–æ–ª—è –≤–≤–æ–¥–∞
            let rawText = textInput.value.trim();

            // 2. –ó–∞–º–µ–Ω—è–µ–º –ø–µ—Ä–µ–Ω–æ—Å—ã —Å—Ç—Ä–æ–∫–∏ (\n) –Ω–∞ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—É—é —á–µ—Ä—Ç—É (|)
            // (–≠—Ç–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –≤–∞—à–µ–º—É —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—é, –≥–¥–µ '|' –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è —Å—Ç—Ä–æ–∫ –≤ URL)
            let processedText = rawText.replace(/\n/g, '|');

            // 3. –ö–æ–¥–∏—Ä—É–µ–º —Ç–µ–∫—Å—Ç –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ URL
            const encodedText = encodeURIComponent(processedText);

            // 4. –§–æ—Ä–º–∏—Ä—É–µ–º –ø–æ–ª–Ω—É—é —Å—Å—ã–ª–∫—É
            const fullUrl = `https://cosmogeniusee-droid.github.io/games/Slider/index.html?text=${encodedText}`;

            // 5. –û–±–Ω–æ–≤–ª—è–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
            urlDisplay.textContent = fullUrl;
            gameLink.href = fullUrl;
        }

        function copyTextToClipboard(text) {
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ª–∏ –±—Ä–∞—É–∑–µ—Ä Clipboard API
            if (navigator.clipboard && navigator.clipboard.writeText) {
                // –ò—Å–ø–æ–ª—å–∑—É–µ–º promise-based –º–µ—Ç–æ–¥
                return navigator.clipboard.writeText(text)
                    .then(() => {
                        console.log('–¢–µ–∫—Å—Ç —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω!');
                    })
                    .catch(err => {
                        console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–∏: ', err);
                    });
            } else {
                // –í —Å—Ç–∞—Ä—ã—Ö –±—Ä–∞—É–∑–µ—Ä–∞—Ö –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∑–∞–ø–∞—Å–Ω–æ–π –º–µ—Ç–æ–¥, –Ω–∞–ø—Ä–∏–º–µ—Ä document.execCommand
                console.warn('–ë—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç Clipboard API. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∑–∞–ø–∞—Å–Ω–æ–π –º–µ—Ç–æ–¥.');
                //fallbackCopyTextToClipboard(text);
            }
        }

        // –í—ã–∑—ã–≤–∞–µ–º —Ñ—É–Ω–∫—Ü–∏—é –ø—Ä–∏ –≤–≤–æ–¥–µ —Ç–µ–∫—Å—Ç–∞
        textInput.addEventListener('input', updateLink);
        copyLink.addEventListener("click", function () {
            copyTextToClipboard(gameLink.href);
        })
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã (–Ω–∞ —Å–ª—É—á–∞–π, –µ—Å–ª–∏ –≤ –ø–æ–ª–µ —É–∂–µ –µ—Å—Ç—å —Ç–µ–∫—Å—Ç)
        updateLink();
    </script>

</body>

</html>